// Streamers turn non-streams into streams

#extern(port_streamer)
pub component PortStreamer<T>([p] T) (seq stream<T>)

// Bridges give stream handlers non-stream interface

pub interface IStreamHandler<T>(seq stream<T>) (res T)

pub component PortBridge<T>([p] T) (res T) {
    nodes {
        streamer PortStreamer<T>
        handler IStreamHandler<T>
    }
    net {
        :p -> streamer:p
        streamer:seq -> handler:seq
        handler:res -> :res
    }
}